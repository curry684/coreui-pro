{"version":3,"file":"multi-select.js","sources":["../src/multi-select.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO (v4.1.0): multi-select.js\n * License (https://coreui.io/pro/license)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'multi-select'\nconst DATA_KEY = 'coreui.multi-select'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2\n\nconst SELECTOR_INPUT = '.form-multi-select-search'\nconst SELECTOR_OPTGROUP = '.form-multi-select-optgroup'\nconst SELECTOR_OPTION = '.form-multi-select-option'\nconst SELECTOR_OPTIONS = '.form-multi-select-options'\nconst SELECTOR_OPTIONS_EMPTY = '.form-multi-select-options-empty'\nconst SELECTOR_SELECT = '.form-multi-select'\nconst SELECTOR_SELECTION = '.form-multi-select-selection'\nconst SELECTOR_SELECTION_CLEANER = '.form-multi-select-selection-cleaner'\n\nconst EVENT_CHANGED = `changed${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_KEYUP = `keyup${EVENT_KEY}`\nconst EVENT_SEARCH = `search${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `showN${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_DISABLED = 'disabled'\nconst CLASS_NAME_SELECT = 'form-multi-select'\nconst CLASS_NAME_SELECT_DROPDOWN = 'form-multi-select-dropdown'\nconst CLASS_NAME_SELECT_MULTIPLE = 'form-multi-select-multiple'\nconst CLASS_NAME_SELECT_WITH_CLEANER = 'form-multi-select-with-cleaner'\nconst CLASS_NAME_SELECT_ALL = 'form-multi-select-all'\nconst CLASS_NAME_OPTGROUP = 'form-multi-select-optgroup'\nconst CLASS_NAME_OPTGROUP_LABEL = 'form-multi-select-optgroup-label'\nconst CLASS_NAME_OPTION = 'form-multi-select-option'\nconst CLASS_NAME_OPTION_WITH_CHECKBOX = 'form-multi-select-option-with-checkbox'\nconst CLASS_NAME_OPTIONS = 'form-multi-select-options'\nconst CLASS_NAME_OPTIONS_EMPTY = 'form-multi-select-options-empty'\nconst CLASS_NAME_SEARCH = 'form-multi-select-search'\nconst CLASS_NAME_SELECTED = 'form-multi-selected'\nconst CLASS_NAME_SELECTION = 'form-multi-select-selection'\nconst CLASS_NAME_SELECTION_CLEANER = 'form-multi-select-selection-cleaner'\nconst CLASS_NAME_SELECTION_TAGS = 'form-multi-select-selection-tags'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_TAG = 'form-multi-select-tag'\nconst CLASS_NAME_TAG_DELETE = 'form-multi-select-tag-delete'\n\nconst CLASS_NAME_LABEL = 'label'\n\nconst Default = {\n  cleaner: true,\n  multiple: true,\n  placeholder: 'Select...',\n  options: false,\n  optionsMaxHeight: 'auto',\n  optionsStyle: 'checkbox',\n  search: false,\n  searchNoResultsLabel: 'No results found',\n  selectAll: true,\n  selectAllLabel: 'Select all options',\n  selectionType: 'tags',\n  selectionTypeCounterText: 'item(s) selected'\n}\n\nconst DefaultType = {\n  cleaner: 'boolean',\n  multiple: 'boolean',\n  placeholder: 'string',\n  options: '(boolean|array)',\n  optionsMaxHeight: '(number|string)',\n  optionsStyle: 'string',\n  search: 'boolean',\n  searchNoResultsLabel: 'string',\n  selectAll: 'boolean',\n  selectAllLabel: 'string',\n  selectionType: 'string',\n  selectionTypeCounterText: 'string'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass MultiSelect extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._selectAllElement = null\n    this._selectionElement = null\n    this._selectionCleanerElement = null\n    this._searchElement = null\n    this._optionsElement = null\n    this._config = this._getConfig(config)\n    this._clone = null\n    this._options = this._getOptions()\n    this._search = ''\n    this._selection = this._getSelectedOptions(this._options)\n\n    if (this._config.options.length > 0) {\n      this._createNativeSelect(this._config.options)\n    }\n\n    this._createSelect()\n    this._addEventListeners()\n    Data.set(this._element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n\n  show() {\n    EventHandler.trigger(this._element, EVENT_SHOW)\n    this._clone.classList.add(CLASS_NAME_SHOW)\n\n    if (this._config.search) {\n      SelectorEngine.findOne(SELECTOR_INPUT, this._clone).focus()\n    }\n\n    EventHandler.trigger(this._element, EVENT_SHOWN)\n  }\n\n  hide() {\n    EventHandler.trigger(this._element, EVENT_HIDE)\n    this._clone.classList.remove(CLASS_NAME_SHOW)\n    EventHandler.trigger(this._element, EVENT_HIDDEN)\n  }\n\n  search(text) {\n    this._search = text.length > 0 ? text.toLowerCase() : text\n    this._filterOptionsList()\n    EventHandler.trigger(this._element, EVENT_SEARCH)\n  }\n\n  update(config) {\n    this._config = this._getConfig(config)\n    this._options = this._getOptions()\n    this._selection = this._getSelectedOptions(this._options)\n    this._clone.remove()\n    this._element.innerHTML = ''\n    this._createNativeOptions(this._element, this._options)\n    this._createSelect()\n    this._addEventListeners()\n  }\n\n  selectAll(options = this._options) {\n    options.forEach(option => {\n      if (option.disabled) {\n        return\n      }\n\n      if (option.label) {\n        this.selectAll(option.options)\n        return\n      }\n\n      this._selectOption(option.value, option.text)\n    })\n  }\n\n  deselectAll(options = this._options) {\n    options.forEach(option => {\n      if (option.disabled) {\n        return\n      }\n\n      if (option.label) {\n        this.deselectAll(option.options)\n        return\n      }\n\n      this._deselectOption(option.value)\n    })\n  }\n\n  getValue() {\n    return this._selection\n  }\n\n  // Private\n\n  _addEventListeners() {\n    EventHandler.on(this._clone, EVENT_CLICK, () => {\n      this.show()\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYUP, () => {\n      this._onSearchChange(this._searchElement)\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYDOWN, event => {\n      const key = event.keyCode || event.charCode\n\n      if ((key === 8 || key === 46) && event.target.value.length === 0) {\n        this._deselectLastOption()\n      }\n    })\n\n    EventHandler.on(this._selectAllElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.selectAll()\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this._onOptionsClick(event.target)\n    })\n\n    EventHandler.on(this._selectionCleanerElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.deselectAll()\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_KEYDOWN, event => {\n      const key = event.keyCode || event.charCode\n\n      if (key === 13) {\n        this._onOptionsClick(event.target)\n        SelectorEngine.findOne(SELECTOR_INPUT, this._clone).focus()\n      }\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    return config\n  }\n\n  _getClassNames() {\n    return [...this._element.classList.value.split(' ')]\n  }\n\n  _getOptions(node = this._element) {\n    if (this._config.options) {\n      return this._config.options\n    }\n\n    const nodes = Array.from(node.childNodes).filter(element => element.nodeName === 'OPTION' || element.nodeName === 'OPTGROUP')\n    const options = []\n\n    nodes.forEach(node => {\n      if (node.nodeName === 'OPTION') {\n        options.push({\n          value: node.value,\n          text: node.innerHTML,\n          selected: node.selected,\n          disabled: node.disabled\n        })\n      }\n\n      if (node.nodeName === 'OPTGROUP') {\n        options.push({\n          label: node.label,\n          options: this._getOptions(node)\n        })\n      }\n    })\n\n    return options\n  }\n\n  _getSelectedOptions(options) {\n    const selected = []\n\n    options.forEach(e => {\n      if (typeof e.value === 'undefined') {\n        this._getSelectedOptions(e.options)\n        return\n      }\n\n      if (e.selected) {\n        // Add only the last option if single select\n        if (!this._config.multiple) {\n          selected.length = 0\n        }\n\n        selected.push({\n          value: String(e.value),\n          text: e.text\n        })\n      }\n    })\n\n    return selected\n  }\n\n  _createNativeSelect(data) {\n    this._element.classList.add(CLASS_NAME_SELECT)\n\n    if (this._config.multiple) {\n      this._element.setAttribute('multiple', true)\n    }\n\n    this._createNativeOptions(this._element, data)\n  }\n\n  _createNativeOptions(parentElement, options) {\n    options.forEach(option => {\n      // eslint-disable-next-line no-negated-condition\n      if ((typeof option.options !== 'undefined')) {\n        const optgroup = document.createElement('optgroup')\n        optgroup.label = option.label\n        this._createNativeOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      } else {\n        const opt = document.createElement('OPTION')\n        opt.value = option.value\n\n        if (option.disabled === true) {\n          opt.setAttribute('disabled', 'disabled')\n        }\n\n        if (option.selected === true) {\n          opt.setAttribute('selected', 'selected')\n        }\n\n        opt.innerHTML = option.text\n        parentElement.append(opt)\n      }\n    })\n  }\n\n  _hideNativeSelect() {\n    this._element.tabIndex = '-1'\n    this._element.style.display = 'none'\n  }\n\n  _createSelect() {\n    const div = document.createElement('div')\n    div.classList.add(CLASS_NAME_SELECT)\n\n    this._getClassNames().forEach(className => {\n      div.classList.add(className)\n    })\n\n    if (this._config.multiple) {\n      div.classList.add(CLASS_NAME_SELECT_MULTIPLE)\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      div.classList.add(CLASS_NAME_SELECTION_TAGS)\n    }\n\n    this._clone = div\n    this._element.parentNode.insertBefore(div, this._element.nextSibling)\n    this._createSelection()\n    this._createSelectionCleaner()\n\n    if (this._config.search) {\n      this._createSearchInput()\n      this._updateSearch()\n    }\n\n    this._createOptionsContainer()\n    this._hideNativeSelect()\n    this._updateOptionsList()\n  }\n\n  _createSelection() {\n    const span = document.createElement('span')\n    span.classList.add(CLASS_NAME_SELECTION)\n    this._clone.append(span)\n\n    this._updateSelection()\n    this._selectionElement = span\n  }\n\n  _createSelectionCleaner() {\n    if (this._config.cleaner && this._config.multiple) {\n      const cleaner = document.createElement('button')\n      cleaner.classList.add(CLASS_NAME_SELECTION_CLEANER)\n      this._clone.append(cleaner)\n      this._clone.classList.add(CLASS_NAME_SELECT_WITH_CLEANER)\n\n      this._updateSelectionCleaner()\n      this._selectionCleanerElement = cleaner\n    }\n  }\n\n  _createSearchInput() {\n    const input = document.createElement('input')\n    input.classList.add(CLASS_NAME_SEARCH)\n\n    this._searchElement = input\n    this._updateSearchSize()\n\n    this._clone.append(input)\n  }\n\n  _createOptionsContainer() {\n    const dropdownDiv = document.createElement('div')\n    dropdownDiv.classList.add(CLASS_NAME_SELECT_DROPDOWN)\n\n    if (this._config.selectAll && this._config.multiple) {\n      const selectAll = document.createElement('button')\n      selectAll.classList.add(CLASS_NAME_SELECT_ALL)\n      selectAll.innerHTML = this._config.selectAllLabel\n\n      this._selectAllElement = selectAll\n\n      dropdownDiv.append(selectAll)\n    }\n\n    const optionsDiv = document.createElement('div')\n    optionsDiv.classList.add(CLASS_NAME_OPTIONS)\n\n    if (this._config.optionsMaxHeight !== 'auto') {\n      optionsDiv.style.maxHeight = `${this._config.optionsMaxHeight}px`\n      optionsDiv.style.overflow = 'scroll'\n    }\n\n    dropdownDiv.append(optionsDiv)\n\n    this._clone.append(dropdownDiv)\n\n    this._createOptions(optionsDiv, this._options)\n    this._optionsElement = optionsDiv\n  }\n\n  _createOptions(parentElement, options) {\n    options.forEach(option => {\n      if (typeof option.value !== 'undefined') {\n        const optionDiv = document.createElement('div')\n        optionDiv.classList.add(CLASS_NAME_OPTION)\n\n        if (option.disabled) {\n          optionDiv.classList.add(CLASS_NAME_DISABLED)\n        }\n\n        if (this._config.optionsStyle === 'checkbox') {\n          optionDiv.classList.add(CLASS_NAME_OPTION_WITH_CHECKBOX)\n        }\n\n        optionDiv.dataset.value = String(option.value)\n        optionDiv.tabIndex = 0\n        optionDiv.innerHTML = option.text\n        parentElement.append(optionDiv)\n      }\n\n      if (typeof option.label !== 'undefined') {\n        const optgroup = document.createElement('div')\n        optgroup.classList.add(CLASS_NAME_OPTGROUP)\n\n        const optgrouplabel = document.createElement('div')\n        optgrouplabel.innerHTML = option.label\n        optgrouplabel.classList.add(CLASS_NAME_OPTGROUP_LABEL)\n        optgroup.append(optgrouplabel)\n\n        this._createOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      }\n    })\n  }\n\n  _createTag(value, text) {\n    const tag = document.createElement('span')\n    tag.classList.add(CLASS_NAME_TAG)\n    tag.dataset.value = value\n    tag.innerHTML = text\n\n    const closeBtn = document.createElement('button')\n    closeBtn.classList.add(CLASS_NAME_TAG_DELETE, 'text-medium-emphasis')\n    closeBtn.setAttribute('aria-label', 'Close')\n    closeBtn.innerHTML = '<span aria-hidden=\"true\">&times;</span>'\n\n    tag.append(closeBtn)\n\n    EventHandler.on(closeBtn, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n\n      tag.remove()\n      this._deselectOption(value)\n    })\n\n    return tag\n  }\n\n  _onOptionsClick(element) {\n    if (!element.classList.contains(CLASS_NAME_OPTION) || element.classList.contains(CLASS_NAME_LABEL)) {\n      return\n    }\n\n    const value = String(element.dataset.value)\n    const text = element.textContent\n\n    if (this._config.multiple && element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._deselectOption(value)\n    } else if (this._config.multiple && !element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._selectOption(value, text)\n    } else if (!this._config.multiple) {\n      this._selectOption(value, text)\n    }\n  }\n\n  _selectOption(value, text) {\n    if (!this._config.multiple) {\n      this.deselectAll()\n    }\n\n    if (this._selection.filter(e => e.value === value).length === 0) {\n      this._selection.push({\n        value,\n        text\n      })\n    }\n\n    const nativeOption = SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element)\n\n    if (nativeOption) {\n      nativeOption.selected = true\n    }\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.add(CLASS_NAME_SELECTED)\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selection\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectOption(value) {\n    const selected = this._selection.filter(e => e.value !== value)\n    this._selection = selected\n\n    SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element).selected = false\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.remove(CLASS_NAME_SELECTED)\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selection\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectLastOption() {\n    if (this._selection.length > 0) {\n      const last = this._selection.pop()\n      this._deselectOption(last.value)\n    }\n  }\n\n  _updateSelection() {\n    const selection = SelectorEngine.findOne(SELECTOR_SELECTION, this._clone)\n\n    if (this._config.multiple && this._config.selectionType === 'counter') {\n      selection.innerHTML = `${this._selection.length} ${this._config.selectionTypeCounterText}`\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      selection.innerHTML = ''\n      this._selection.forEach(e => {\n        selection.append(this._createTag(e.value, e.text))\n      })\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'text') {\n      selection.innerHTML = this._selection.map(e => e.text).join(', ')\n      return\n    }\n\n    if (this._selection.length > 0) {\n      selection.innerHTML = this._selection[0].text\n    }\n  }\n\n  _updateSelectionCleaner() {\n    if (!this._config.cleaner || this._selectionCleanerElement === null) {\n      return\n    }\n\n    const selectionCleaner = SelectorEngine.findOne(SELECTOR_SELECTION_CLEANER, this._clone)\n\n    if (this._selection.length > 0) {\n      selectionCleaner.style.removeProperty('display')\n      return\n    }\n\n    selectionCleaner.style.display = 'none'\n  }\n\n  _updateSearch() {\n    if (!this._config.search) {\n      return\n    }\n\n    if (this._selection.length > 0 && !this._config.multiple) {\n      this._searchElement.placeholder = this._selection[0].text\n      this._selectionElement.style.display = 'none'\n      return\n    }\n\n    if (this._selection.length > 0 && this._config.multiple && this._config.selectionType !== 'counter') {\n      this._searchElement.placeholder = ''\n      this._selectionElement.style.removeProperty('display')\n      return\n    }\n\n    if (this._selection.length === 0 && this._config.multiple) {\n      this._searchElement.placeholder = this._config.placeholder\n      this._selectionElement.style.display = 'none'\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'counter') {\n      this._searchElement.placeholder = `${this._selection.length} item(s) selected`\n      this._selectionElement.style.display = 'none'\n    }\n  }\n\n  _updateSearchSize(size = 2) {\n    if (!this._searchElement || !this._config.multiple) {\n      return\n    }\n\n    if (this._selection.length > 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.size = size\n      return\n    }\n\n    if (this._selection.length === 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.removeAttribute('size')\n    }\n  }\n\n  _onSearchChange(element) {\n    if (element) {\n      this.search(element.value)\n\n      this._updateSearchSize(element.value.length + 1)\n    }\n  }\n\n  _updateOptionsList(options = this._options) {\n    options.forEach(option => {\n      if (option.label) {\n        this._updateOptionsList(option.options)\n        return\n      }\n\n      if (option.selected) {\n        this._selectOption(option.value, option.text)\n      }\n    })\n  }\n\n  _isVisible(element) {\n    const style = window.getComputedStyle(element)\n    return (style.display !== 'none')\n  }\n\n  _filterOptionsList() {\n    const options = SelectorEngine.find(SELECTOR_OPTION, this._clone)\n    let visibleOptions = 0\n\n    options.forEach(option => {\n      // eslint-disable-next-line unicorn/prefer-includes\n      if (option.textContent.toLowerCase().indexOf(this._search) === -1) {\n        option.style.display = 'none'\n      } else {\n        option.style.removeProperty('display')\n        visibleOptions++\n      }\n\n      const optgroup = option.closest(SELECTOR_OPTGROUP)\n      if (optgroup) {\n        // eslint-disable-next-line  unicorn/prefer-array-some\n        if (SelectorEngine.children(optgroup, SELECTOR_OPTION).filter(element => this._isVisible(element)).length > 0) {\n          optgroup.style.removeProperty('display')\n        } else {\n          optgroup.style.display = 'none'\n        }\n      }\n    })\n\n    if (visibleOptions > 0) {\n      if (SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone).remove()\n      }\n\n      return\n    }\n\n    if (visibleOptions === 0) {\n      const placeholder = document.createElement('div')\n      placeholder.classList.add(CLASS_NAME_OPTIONS_EMPTY)\n      placeholder.innerHTML = this._config.searchNoResultsLabel\n\n      if (!SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS, this._clone).append(placeholder)\n      }\n    }\n  }\n\n  // Static\n\n  static multiSelectInterface(element, config) {\n    const data = MultiSelect.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      MultiSelect.multiSelectInterface(this, config)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event && (event.button === RIGHT_MOUSE_BUTTON ||\n      (event.type === 'keyup' && event.key !== TAB_KEY))) {\n      return\n    }\n\n    const selects = SelectorEngine.find(SELECTOR_SELECT)\n\n    for (let i = 0, len = selects.length; i < len; i++) {\n      const context = Data.get(selects[i], DATA_KEY)\n      const relatedTarget = {\n        relatedTarget: selects[i]\n      }\n\n      if (event && event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      if (!context) {\n        continue\n      }\n\n      if (!context._clone.classList.contains(CLASS_NAME_SHOW)) {\n        continue\n      }\n\n      if (context._clone.contains(event.target)) {\n        continue\n      }\n\n      context._clone.classList.remove(CLASS_NAME_SHOW)\n\n      EventHandler.trigger(context._element, EVENT_HIDDEN)\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  SelectorEngine.find(SELECTOR_SELECT)\n    .forEach(ms => {\n      if (ms.tabIndex !== -1) {\n        MultiSelect.multiSelectInterface(ms)\n      }\n    })\n})\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, MultiSelect.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, MultiSelect.clearMenus)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .MultiSelect to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(MultiSelect)\n\nexport default MultiSelect\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","SELECTOR_INPUT","SELECTOR_OPTGROUP","SELECTOR_OPTION","SELECTOR_OPTIONS","SELECTOR_OPTIONS_EMPTY","SELECTOR_SELECT","SELECTOR_SELECTION","SELECTOR_SELECTION_CLEANER","EVENT_CHANGED","EVENT_CLICK","EVENT_HIDE","EVENT_HIDDEN","EVENT_KEYDOWN","EVENT_KEYUP","EVENT_SEARCH","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_DISABLED","CLASS_NAME_SELECT","CLASS_NAME_SELECT_DROPDOWN","CLASS_NAME_SELECT_MULTIPLE","CLASS_NAME_SELECT_WITH_CLEANER","CLASS_NAME_SELECT_ALL","CLASS_NAME_OPTGROUP","CLASS_NAME_OPTGROUP_LABEL","CLASS_NAME_OPTION","CLASS_NAME_OPTION_WITH_CHECKBOX","CLASS_NAME_OPTIONS","CLASS_NAME_OPTIONS_EMPTY","CLASS_NAME_SEARCH","CLASS_NAME_SELECTED","CLASS_NAME_SELECTION","CLASS_NAME_SELECTION_CLEANER","CLASS_NAME_SELECTION_TAGS","CLASS_NAME_SHOW","CLASS_NAME_TAG","CLASS_NAME_TAG_DELETE","CLASS_NAME_LABEL","Default","cleaner","multiple","placeholder","options","optionsMaxHeight","optionsStyle","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","DefaultType","MultiSelect","BaseComponent","constructor","element","config","_selectAllElement","_selectionElement","_selectionCleanerElement","_searchElement","_optionsElement","_config","_getConfig","_clone","_options","_getOptions","_search","_selection","_getSelectedOptions","length","_createNativeSelect","_createSelect","_addEventListeners","Data","set","_element","show","EventHandler","trigger","classList","add","SelectorEngine","findOne","focus","hide","remove","text","toLowerCase","_filterOptionsList","update","innerHTML","_createNativeOptions","forEach","option","disabled","label","_selectOption","value","deselectAll","_deselectOption","getValue","on","_onSearchChange","event","key","keyCode","charCode","target","_deselectLastOption","preventDefault","stopPropagation","_onOptionsClick","Manipulator","getDataAttributes","_getClassNames","split","node","nodes","Array","from","childNodes","filter","nodeName","push","selected","e","String","data","setAttribute","parentElement","optgroup","document","createElement","append","opt","_hideNativeSelect","tabIndex","style","display","div","className","parentNode","insertBefore","nextSibling","_createSelection","_createSelectionCleaner","_createSearchInput","_updateSearch","_createOptionsContainer","_updateOptionsList","span","_updateSelection","_updateSelectionCleaner","input","_updateSearchSize","dropdownDiv","optionsDiv","maxHeight","overflow","_createOptions","optionDiv","dataset","optgrouplabel","_createTag","tag","closeBtn","contains","textContent","nativeOption","last","pop","selection","map","join","selectionCleaner","removeProperty","size","removeAttribute","_isVisible","window","getComputedStyle","find","visibleOptions","indexOf","closest","children","multiSelectInterface","getOrCreateInstance","TypeError","jQueryInterface","each","clearMenus","button","type","selects","i","len","context","get","relatedTarget","ms","defineJQueryPlugin"],"mappings":"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"}